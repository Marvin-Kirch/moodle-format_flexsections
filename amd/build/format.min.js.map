{"version":3,"file":"format.min.js","sources":["../src/format.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Various actions on modules and sections in the editing mode - hiding, duplicating, deleting, etc.\n *\n * @module     format_flexsections/format\n * @copyright  2022 Marina Glancy\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Notification from 'core/notification';\nimport {get_strings as getStrings} from 'core/str';\n\nconst SELECTORS = {\n    SECTION_MERGEUP: 'li.section a[data-action-flexsections=\"mergeup\"]'\n};\n\n/**\n * Initialize module\n */\nexport const init = () => {\n    document.addEventListener('click', e => {\n        const mergeupElement = e.target.closest(SELECTORS.SECTION_MERGEUP);\n        if (mergeupElement) {\n            e.preventDefault();\n            confirmMerge(mergeupElement);\n        }\n    });\n};\n\nconst confirmMerge = (target) => {\n    const href = target.getAttribute('href');\n    getStrings([\n        {key: 'confirm', component: 'moodle'},\n        {key: 'confirmmerge', component: 'format_flexsections'},\n        {key: 'yes', component: 'moodle'},\n        {key: 'no', component: 'moodle'}\n    ]).done(function(strings) {\n        Notification.confirm(\n            strings[0], // Confirm.\n            strings[1], // Are you sure you want to merge.\n            strings[2], // Yes.\n            strings[3], // No.\n            function() {\n                window.location.href = href + '&confirm=1';\n            }\n        );\n    }).fail(Notification.exception);\n};\n"],"names":["SELECTORS","document","addEventListener","e","mergeupElement","target","closest","preventDefault","confirmMerge","href","getAttribute","key","component","done","strings","confirm","window","location","fail","Notification","exception"],"mappings":";;;;;;;4JA0BMA,0BACe,iEAMD,KAChBC,SAASC,iBAAiB,SAASC,UACzBC,eAAiBD,EAAEE,OAAOC,QAAQN,2BACpCI,iBACAD,EAAEI,iBACFC,aAAaJ,2BAKnBI,aAAgBH,eACZI,KAAOJ,OAAOK,aAAa,6BACtB,CACP,CAACC,IAAK,UAAWC,UAAW,UAC5B,CAACD,IAAK,eAAgBC,UAAW,uBACjC,CAACD,IAAK,MAAOC,UAAW,UACxB,CAACD,IAAK,KAAMC,UAAW,YACxBC,MAAK,SAASC,+BACAC,QACTD,QAAQ,GACRA,QAAQ,GACRA,QAAQ,GACRA,QAAQ,IACR,WACIE,OAAOC,SAASR,KAAOA,KAAO,mBAGvCS,KAAKC,sBAAaC"}